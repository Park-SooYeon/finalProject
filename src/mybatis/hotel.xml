<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ht">

<!-- 호텔 탑메뉴 진입시 예약불가능한 호텔을  보여줌니당 -->
<select id='mainNo'  resultType="bean.PlaceVo">
select 
		PLACE_SERIAL,PARTNER_SERIAL, PLACE_NAME, 
		PLACE_LOCATION, LATITUDE, LONGITUDE, STATE,
	    LOCAL_CODE 
from place 




</select>

<select id='mainYes'  resultType="bean.PlaceVo">
select 
		p.PLACE_SERIAL ,p.PARTNER_SERIAL,p.PLACE_NAME, 
		p.PLACE_LOCATION, p.LATITUDE, p.LONGITUDE,  p.STATE,
	    p.LOCAL_CODE,p.place_tel,max(ph.orifile) oriFile
from place p, place_photo ph

where p.PLACE_SERIAL = ph.PLACE_SERIAL   and partner_serial is not null 

group by p.PLACE_SERIAL,p.PARTNER_SERIAL, p.PLACE_NAME, 
		p.PLACE_LOCATION, p.LATITUDE, p.LONGITUDE,  p.STATE,
	    p.LOCAL_CODE,p.place_tel



</select>

 
<select id='placeSelect'  parameterType ="hashMap" resultType="bean.PlaceVo">
SELECT PLACE_SERIAL, PARTNER_SERIAL, PLACE_NAME, PLACE_LOCATION, LATITUDE, LONGITUDE, STATE, BREAKFAST, WI_FI, PARKING, LOCAL_CODE, PLACE_TEL 
FROM SCOTT.PLACE
where place_tel is not null
      and local_code in
  <foreach item="local" index="index" collection="local"
      open="(" separator="," close=")">
        ${local}
  </foreach>
     
   <foreach item="filter"  collection="filter">
     and    ${filter} = 1
  </foreach>
  

</select>

 
 </mapper>